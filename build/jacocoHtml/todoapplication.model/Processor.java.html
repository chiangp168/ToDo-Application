<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Processor.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Assignment9</a> &gt; <a href="index.source.html" class="el_package">todoapplication.model</a> &gt; <span class="el_source">Processor.java</span></div><h1>Processor.java</h1><pre class="source lang-java linenums">package todoapplication.model;

import java.util.ArrayList;
import java.util.List;


/**
 * Main Model Class : Processor. Accepts inputs from the Controller and
 * executes necessary data changes
 * Follows Singleton design pattern (the lazy allocation).
 */
public class Processor {
  private static Processor processor;
  private CollectionOfToDos collectionOfToDos;
<span class="nc" id="L15">  private static String SPACE = &quot; &quot;;</span>
  private static final String GIVEN = &quot;Given&quot;;
  private List&lt;ToDo&gt; toDosToWorkWith;

  /**
   * Constructs a Processor object,implements the &quot;lazy&quot; allocation method.
   */
<span class="nc" id="L22">  private Processor() {</span>
<span class="nc" id="L23">    this.collectionOfToDos = CollectionOfToDos.getCollectionOfToDos();</span>
<span class="nc" id="L24">  }</span>

  public static synchronized Processor getProcessor() {
<span class="nc bnc" id="L27" title="All 2 branches missed.">    if (processor == null) {</span>
<span class="nc" id="L28">      processor = new Processor();</span>
    }
<span class="nc" id="L30">    return processor;</span>
  }

  /**
   * Sets the ToDos to work with to the given list of ToDos
   * @param toDosToWorkWith - the given list of ToDos to work with
   */
  public void setToDosToWorkWith(List&lt;ToDo&gt; toDosToWorkWith) {
<span class="nc" id="L38">    this.toDosToWorkWith = toDosToWorkWith;</span>
<span class="nc" id="L39">  }</span>

  /**
   * Returns the list of ToDo's to work with
   * @return the list of ToDo's to work with
   */
  public List &lt;ToDo&gt; getToDosToWorkWith() {
<span class="nc" id="L46">    return this.toDosToWorkWith;</span>
  }

  /**
   * Returns the collection of ToDos
   * @return the collection of ToDos
   */
  public CollectionOfToDos getCollectionOfToDos() {
<span class="nc" id="L54">    return collectionOfToDos;</span>
  }

  /**
   * Adds a ToDo to the collection with the given specifications
   * @param text - the txt description of the ToDo (required)
   * @param completed - the completion status of the ToDo (optional)
   * @param due - the due date of the ToDo (optional)
   * @param priority - the ToDo's priority (optional)
   * @param category - the category of the ToDo (optional)
   */
  public void addTodo(String text, String completed, String due, String priority, String category) {
<span class="nc" id="L66">    ToDo newToDo = ToDoCreator.getToDoCreator().createNewToDo(text, completed,</span>
        due, priority, category);
<span class="nc" id="L68">    CollectionOfToDos.getCollectionOfToDos().addToDo(newToDo);</span>
<span class="nc" id="L69">  }</span>

  /**
   * Updates the completion status of the given list of ToDo Ids
   * @param ids - a list of Ids of ToDo objects to update
   * @throws IDNotFoundException when an ID in the list is not contained in the Collection
   */
  public void updateCompletionStatusOfToDos(String ids) throws IDNotFoundException {
<span class="nc" id="L77">    String[] idsToUpdate = ids.split(SPACE);</span>
    // Take the String list of IDs and produces the corresponding list of integer IDs
<span class="nc" id="L79">    Integer[] idsToUpdateAsIntegers = new Integer[idsToUpdate.length];</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">    for (int i = 0; i &lt; idsToUpdate.length; i++) {</span>
<span class="nc" id="L81">      idsToUpdateAsIntegers[i] = Integer.parseInt(idsToUpdate[i]);</span>
    }
    // Update the list of ToDos
<span class="nc" id="L84">    ToDoUpdater.getToDoUpdater().updateToDos(idsToUpdateAsIntegers);</span>
<span class="nc" id="L85">  }</span>

  /**
   * Populates the Collection of ToDos with the rows of the given CSV filename
   * @param filename - the file path containing the rows of data to populate the Collection with
   * @throws FileErrorException when the given file path is invalid
   */
  public void populateCollectionOfToDosWithCSV(String filename)
      throws FileErrorException {
<span class="nc" id="L94">    List&lt;String&gt; csvLines = CSVFileReader.getCsvFileReader().readCSVFile(filename);</span>
<span class="nc" id="L95">    CSVProcessor.getCsvProcessor().setCsvLines(csvLines);</span>
<span class="nc" id="L96">    List&lt;ToDo&gt; toDosFromFile = CSVProcessor.getCsvProcessor().parseFile();</span>
<span class="nc" id="L97">    this.populateCollectionOfToDos(toDosFromFile);</span>
<span class="nc" id="L98">  }</span>

  /**
   * Populates the collection of ToDos with the given list of ToDos
   * @param toDos - the list of ToDos to populate the Collection with
   */
  private void populateCollectionOfToDos(List&lt;ToDo&gt; toDos) {
<span class="nc bnc" id="L105" title="All 2 branches missed.">    for (ToDo todo : toDos) {</span>
<span class="nc" id="L106">      this.collectionOfToDos.addToDo(todo);</span>
<span class="nc" id="L107">    }</span>
<span class="nc" id="L108">  }</span>

  /**
   * Helper Method to sort and filter as requested prior to display in the view
   * @param showIncomplete - command line indicator that the user wants to display only incomplete
   *                       ToDos
   * @param showCategory - command line indicator that the user wants to display only ToDos
   *                     of the specified category
   * @param sortByDate - command line indicator that the user wants to sort the ToDos by due date
   * @param sortByPriority -command line indicator that the user wants to sort the ToDos by priority
   */
  public void sortAndFilter(String showIncomplete, String showCategory,
      String sortByDate, String sortByPriority) {
    // Complete any requested filtering
<span class="nc" id="L122">    this.filter(showIncomplete, showCategory);</span>
    // Complete any requested sorting
<span class="nc" id="L124">    this.sort(sortByDate, sortByPriority);</span>
<span class="nc" id="L125">  }</span>

  /**
   * Filters the ToDos in our collection according to the specified filter(s)
   * @param showIncomplete - optional argument flag whether incomplete ToDos need to be included
   *                      in the display
   * @param showCategory - optional argument flag whether a specific category of ToDos need to be
   *                     displayed
   */
  private void filter(String showIncomplete, String showCategory) {
    // Filter/ sort on entire Collection of ToDos unless a filter is applied
<span class="nc" id="L136">    processor.setToDosToWorkWith(processor.getCollectionOfToDos().getToDos());</span>
    List&lt;ToDo&gt; filterResults;
<span class="nc bnc" id="L138" title="All 2 branches missed.">    if (showIncomplete != null) {</span>
<span class="nc" id="L139">      CompletionFilter.getCompletionFilter().setCompletionStatusToFilterOn(false);</span>
<span class="nc" id="L140">      filterResults = CompletionFilter.getCompletionFilter()</span>
<span class="nc" id="L141">                                      .filter(processor.getToDosToWorkWith());</span>
      // Set ToDos to work with to reflect the filtered results
<span class="nc" id="L143">      processor.setToDosToWorkWith(filterResults);</span>
    }
<span class="nc bnc" id="L145" title="All 2 branches missed.">    if (showCategory != null) {</span>
<span class="nc" id="L146">      CategoryFilter.getCategoryFilter().setCategoryToFilterOn(showCategory);</span>
<span class="nc" id="L147">      filterResults = CategoryFilter.getCategoryFilter()</span>
<span class="nc" id="L148">          .filter(processor.getToDosToWorkWith());</span>
      // Set ToDos to work with to reflect the filtered results
<span class="nc" id="L150">      processor.setToDosToWorkWith(filterResults);</span>
    }
<span class="nc" id="L152">  }</span>

  /**
   * Sort method call on the model
   * @param sortByDate - optional argument flag to sort the ToDos list in the ascending
   *                   order of the due date.
   * @param sortByPriority - optional argument flag to sort the ToDos list in the ascending order
   *                       of priority
   */
  private void sort(String sortByDate, String sortByPriority) {
<span class="nc bnc" id="L162" title="All 2 branches missed.">    if (sortByDate != null) {</span>
      // sort
<span class="nc" id="L164">      DateSorter.getDateSorter().sortByDate(processor.getToDosToWorkWith());</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">    } else if (sortByPriority != null) {</span>
<span class="nc" id="L166">      PrioritySorter.getPrioritySorter().sortByPriority(processor.getToDosToWorkWith());</span>
    }
<span class="nc" id="L168">  }</span>

  public void reset() {
<span class="nc" id="L171">    this.collectionOfToDos.reset();</span>
<span class="nc" id="L172">    this.toDosToWorkWith = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L173">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>